<project xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://maven.apache.org/POM/4.0.0"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <properties>
        <version.maven-checkstyle-plugin>2.15</version.maven-checkstyle-plugin>
        <version.findbugs-maven-plugin>3.0.2</version.findbugs-maven-plugin>
        <version.maven-pmd-plugin>3.5</version.maven-pmd-plugin>

        <checkstyle.version>6.10.1</checkstyle.version>
        <checkstyle.config.location>codingrules/checkstyle.xml</checkstyle.config.location>
    </properties>

    <profiles>
        <profile>
            <id>Statische Codeanalyse</id>
            <activation>
                <property>
                    <name>!skipTests</name>
                </property>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-antrun-plugin</artifactId>
                        <version>1.8</version>
                        <executions>
                            <execution>
                                <phase>validate</phase>
                                <goals>
                                    <goal>run</goal>
                                </goals>
                                <configuration>
                                    <tasks>
                                        <echo>Statische Codeanalyse aktiviert.</echo>
                                        <echo>Displaying value of 'skipTests' property</echo>
                                        <echo>[skipTests] ${skipTests}</echo>
                                    </tasks>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>


                    <!-- pmd -->
                    <!-- This version of Maven PMD Plugin uses PMD 5.3.2 and requires Java 1.6. -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-pmd-plugin</artifactId>
                        <version>${version.maven-pmd-plugin}</version>
                        <dependencies>
                            <dependency>
                                <artifactId>checkstyle</artifactId>
                                <groupId>de.therapeutenkiller</groupId>
                                <version>@project.version@</version>
                            </dependency>
                        </dependencies>

                        <configuration>
                            <verbose>true</verbose>
                            <includeTests>true</includeTests>
                            <rulesets>
                                <ruleset>codingrules/pmd-ruleset.xml</ruleset>
                            </rulesets>
                        </configuration>
                        <executions>
                            <execution>
                                <goals>
                                    <goal>check</goal>
                                    <goal>cpd-check</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>


                    <!-- checkstyle -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-checkstyle-plugin</artifactId>
                        <version>${version.maven-checkstyle-plugin}</version>
                        <dependencies>
                            <dependency>
                                <groupId>com.puppycrawl.tools</groupId>
                                <artifactId>checkstyle</artifactId>
                                <version>${checkstyle.version}</version>
                            </dependency>
                            <dependency>
                                <artifactId>checkstyle</artifactId>
                                <groupId>de.therapeutenkiller</groupId>
                                <version>@project.version@</version>
                            </dependency>
                        </dependencies>
                        <configuration>
                            <includeTestSourceDirectory>true</includeTestSourceDirectory>
                            <includeResources>true</includeResources>
                            <detail>true</detail>

                            <skip>${skipTests}</skip>
                            <configLocation>${checkstyle.config.location}</configLocation>
                            <failsOnError>true</failsOnError>
                            <consoleOutput>true</consoleOutput>
                        </configuration>
                        <executions>
                            <execution>
                                <id>validate</id>
                                <phase>process-classes</phase>
                                <goals>
                                    <goal>check</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>

                    <!-- findbugs -->
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>findbugs-maven-plugin</artifactId>
                        <version>${version.findbugs-maven-plugin}</version>
                        <dependencies>
                            <dependency>
                                <artifactId>checkstyle</artifactId>
                                <groupId>de.therapeutenkiller</groupId>
                                <version>@project.version@</version>
                            </dependency>
                        </dependencies>
                        <configuration>
                            <effort>Max</effort>
                            <threshold>Low</threshold>
                            <xmlOutput>true</xmlOutput>
                            <excludeFilterFile>codingrules/findbugs-exclude.xml</excludeFilterFile>
                            <skip>${skipTests}</skip>
                        </configuration>
                        <executions>
                            <execution>
                                <goals>
                                    <goal>check</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>

                </plugins>
            </build>
        </profile>
    </profiles>

    <build>
    </build>
</project>
